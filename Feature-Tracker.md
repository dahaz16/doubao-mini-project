# 项目动态进度表 (产品视角 - Feature Tracker)

> **给 AI Agent 的指令:** > 这是一个活文档。在执行任何代码修改前,请先更新此文档。
> 1. 若发现新问题或测试未跑通,请在"待验证细节"或"风险点收件箱"中新增条目。
> 2. 修改代码后,请同步更新对应功能的 [ ] 状态为 [x]。
> 3. 所有技术问题请用"大白话"在文档中为产品经理描述一遍。

---

## 1. 语音识别 (ASR)
- [x] **基础功能:** 将用户语音转化为文字。
- [ ] **待优化项:** - [ ] 环境噪音下的识别准确度。
    - [ ] 方言/口音适配测试。

## 2. 语义分析 (NLU)
- [ ] **意图识别:** 准确判断用户是在"描述回忆"还是在"修改指令"。
- [ ] **信息提取:** 自动识别并提取对话中的关键人名、时间、地点。
- [ ] **情感分析:** 识别用户情绪,调整后续采访的语气。

## 3. 记忆存储与 Stn Agent (速记员) ✅
- [x] **记忆落库:** 实现将访谈对话自动拆解为 Stage/Topic/Shot 三级结构。
- [x] **数据策略:** 支持 n/u/k (新建/更新/保持) 智能更新策略,避免数据重复。
- [x] **故事板 (Story Board):** 自动生成路径化 ID (如 S1T2O3) 的回忆总览,供后续导演参考。

## 4. 导演 Agent (Dir Agent) ✅
- [x] **提示生成:** 根据故事板自动生成访谈引导 (Hint)。
- [ ] **对话闭环:** 将导演指令翻译为访谈员的追问逻辑。

> **程序员笔记 (2026/02/01):** v3.4 迭代完成 - 实现了 Prompt Config 动态管理机制,所有 LLM 的提示词现可通过数据库灵活配置和版本管理。**管理后台已上线** - 实现了数据库可视化浏览和配置管理功能，支持 sys_config、base_models、prompt_config 三大配置表的 CRUD 操作。

---

## 5. 管理后台 (Admin Dashboard) ✅
- [x] **数据库可视化**: 查看所有表数据，支持分页和搜索
- [x] **系统配置管理**: 内联编辑 sys_config 配置项
- [x] **模型库管理**: CRUD 操作 base_models 表
- [x] **提示词管理**: 版本化管理 prompt_config，支持一键激活/停用

---

## 6. 变更日志 (Product Log)
- **2026/02/02 (v3.6):** ASR/TTS 调用记录与音频保存 - 实现了 ASR 和 TTS 调用日志自动落库(耗时/成本/模型)。修复了 AI TTS 音频自动上传 COS 并与对话记录关联的功能。正在修复用户录音上传接口。
- **2026/02/01 (v3.5):** 数据库结构优化 - 为 `users` 表新增 `user_name` (VARCHAR(64), NOT NULL) 和 `redeem_code` (CHAR(4)) 字段，支持管理后台用户命名和未来兑换码功能。
- **2026/02/01 (下午):** 管理后台初版完成 - 使用 React + Vite + Ant Design 5.22 构建前端，FastAPI 提供后端 API。实现了数据库浏览、系统配置编辑、模型库管理、提示词配置四大核心功能。部署方式为静态文件托管，访问地址 `http://局域网IP:8000/admin`。
- **2026/02/01 (上午):** v3.4 迭代完成 - 实现了 Prompt Config 动态管理机制,LLM 提示词现可通过数据库灵活配置,支持版本管理和快速回滚。重构了三个 Agent 的 LLM input 配置逻辑,实现了 Session 新建判断和 uc 累计机制。
- **2026/01/27:** Stn Agent 核心逻辑开发并验证通过。实现 Story Board 路径化 ID 格式优化。
- **2026/01/23:** 完成腾讯云数据库迁移与 17 张核心表结构同步。
- **2026/01/13:** 新增 UI/UX 优化模块。开始与产品经理沟通 UI 优化合作模式。